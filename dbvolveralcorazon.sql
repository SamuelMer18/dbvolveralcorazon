--
-- Script was generated by Devart dbForge Studio for MySQL, Version 10.0.225.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 5/2/2024 8:38:15 AM
-- Server version: 8.0.20
--

--
-- Disable foreign keys
--
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

--
-- Set SQL mode
--
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

--
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
USE heroku_33f44359de27941;

--
-- Drop table `logro`
--
DROP TABLE IF EXISTS logro;

--
-- Drop table `rango`
--
DROP TABLE IF EXISTS rango;

--
-- Drop table `participacion`
--
DROP TABLE IF EXISTS participacion;

--
-- Drop table `actividad`
--
DROP TABLE IF EXISTS actividad;

--
-- Drop table `miembro`
--
DROP TABLE IF EXISTS miembro;

--
-- Drop table `familia`
--
DROP TABLE IF EXISTS familia;

--
-- Set default database
--
USE heroku_33f44359de27941;

--
-- Create table `familia`
--
CREATE TABLE familia (
  familia_id int NOT NULL AUTO_INCREMENT,
  nombre_familia varchar(255) NOT NULL,
  cantidad_familia int NOT NULL,
  miembro_id int DEFAULT NULL,
  PRIMARY KEY (familia_id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 25,
AVG_ROW_LENGTH = 16384,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_general_ci,
ROW_FORMAT = DYNAMIC;

--
-- Create table `miembro`
--
CREATE TABLE miembro (
  miembro_id int NOT NULL AUTO_INCREMENT,
  familia_id int NOT NULL,
  nombre_usuario varchar(255) NOT NULL,
  contrasena varchar(255) NOT NULL,
  nombre_miembro varchar(255) NOT NULL,
  user_type varchar(100) NOT NULL DEFAULT 'user',
  PRIMARY KEY (miembro_id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 25,
AVG_ROW_LENGTH = 16384,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_general_ci,
ROW_FORMAT = DYNAMIC;

--
-- Create foreign key
--
ALTER TABLE miembro
ADD CONSTRAINT miembro_ibfk_1 FOREIGN KEY (familia_id)
REFERENCES familia (familia_id) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create table `actividad`
--
CREATE TABLE actividad (
  actividad_id int NOT NULL AUTO_INCREMENT,
  nombre_actividad varchar(255) NOT NULL,
  fecha_inicio date DEFAULT NULL,
  fecha_fin date DEFAULT NULL,
  PRIMARY KEY (actividad_id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 8,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_general_ci,
ROW_FORMAT = DYNAMIC;

--
-- Create table `participacion`
--
CREATE TABLE participacion (
  participacion_id int NOT NULL AUTO_INCREMENT,
  miembro_id int NOT NULL,
  actividad_id int NOT NULL,
  puntos_ganados int NOT NULL DEFAULT 0,
  estado tinyint(1) NOT NULL DEFAULT 0,
  cant_participantes int NOT NULL,
  cant_datos int NOT NULL,
  fecha_reg date NOT NULL,
  constancias varchar(2000) NOT NULL,
  cantidad_vivos int DEFAULT NULL,
  cantidad_antepas int DEFAULT NULL,
  descripcion_particip varchar(5000) DEFAULT NULL,
  nombre_part_mihistoria varchar(255) DEFAULT NULL,
  subnombre varchar(255) DEFAULT NULL,
  PRIMARY KEY (participacion_id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 150,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_general_ci,
ROW_FORMAT = DYNAMIC;

--
-- Create foreign key
--
ALTER TABLE participacion
ADD CONSTRAINT participacion_ibfk_1 FOREIGN KEY (miembro_id)
REFERENCES miembro (miembro_id) ON DELETE CASCADE;

--
-- Create foreign key
--
ALTER TABLE participacion
ADD CONSTRAINT participacion_ibfk_2 FOREIGN KEY (actividad_id)
REFERENCES actividad (actividad_id);

--
-- Create table `rango`
--
CREATE TABLE rango (
  rango_id int NOT NULL AUTO_INCREMENT,
  nombre_rango varchar(255) NOT NULL,
  descripcion varchar(1000) DEFAULT NULL,
  copas_requeridas int DEFAULT NULL,
  PRIMARY KEY (rango_id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 5,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_general_ci,
ROW_FORMAT = DYNAMIC;

--
-- Create table `logro`
--
CREATE TABLE logro (
  logro_id int NOT NULL AUTO_INCREMENT,
  miembro_id int DEFAULT NULL,
  rango_id int DEFAULT NULL,
  fecha_logro date DEFAULT NULL,
  PRIMARY KEY (logro_id)
)
ENGINE = INNODB,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_general_ci,
ROW_FORMAT = DYNAMIC;

--
-- Create foreign key
--
ALTER TABLE logro
ADD CONSTRAINT logro_ibfk_1 FOREIGN KEY (miembro_id)
REFERENCES miembro (miembro_id);

--
-- Create foreign key
--
ALTER TABLE logro
ADD CONSTRAINT logro_ibfk_2 FOREIGN KEY (rango_id)
REFERENCES rango (rango_id);

-- 
-- Dumping data for table familia
--
INSERT INTO familia VALUES
(19, 'mercado', 10, 19),
(20, 'carlos', 66, 20),
(21, 'Condori Davila', 5, 21),
(22, 'Serrano Chuquimia ', 3, 22),
(23, 'Tester', 100, 23),
(24, 'Valdez Blacutt ', 4, 24);

-- 
-- Dumping data for table actividad
--
INSERT INTO actividad VALUES
(1, 'Indexación', NULL, NULL),
(2, 'Revisión Rápida de Nombre', NULL, NULL),
(3, 'Revisión de Nombre Completo', NULL, NULL),
(4, 'Nombres Enviados al templo', NULL, NULL),
(5, 'Agregar Nombres (Árbol Genealógico)', NULL, NULL),
(6, 'Mi Historia', NULL, NULL),
(7, 'Actividad de Hogar', NULL, NULL);

-- 
-- Dumping data for table rango
--
INSERT INTO rango VALUES
(1, 'Aprendiz Genealógico', 'Este es el nivel inicial, donde comienzas tu viaje. El requisito para este rango es de 0 a 500 Copas. Aquí estás aprendiendo los conceptos básicos y comenzando a hacer tus primeros descubrimientos. ', 0),
(2, ' Explorador Ancestral', 'Una vez que has obtenido más de 500 Copas, te conviertes en un Explorador Ancestral. Esto significa que has adquirido un conocimiento considerable y estás listo para explorar más profundamente tu genealogía. ', 501),
(3, 'Guardian del Legado', 'Al obtener más de 1000 Copas, te conviertes en un Guardian del Legado. Este rango indica que no solo estás explorando tu genealogía, sino que también estás trabajando para preservar y proteger ese legado. ', 1001),
(4, 'Cronista Legendario ', 'Este es el rango más alto, alcanzado al obtener más de 2000 Copas. Como Cronista Legendario, no solo has explorado y protegido tu legado, sino que también estás trabajando para contar esas historias y compartir ese conocimiento con otros. ', 2001);

-- 
-- Dumping data for table miembro
--
INSERT INTO miembro VALUES
(19, 19, 'samuel', 'd8ae5776067290c4712fa454006c8ec6', 'samuel', 'user'),
(20, 20, 'carlos', 'dc599a9972fde3045dab59dbd1ae170b', 'carlos', 'user'),
(21, 21, 'PandaRisueño', '3dfc4902522b16056722b97ef8847aa2', 'Rene', 'user'),
(22, 22, 'LucianaWhitney ', '59b7f9a030a8f38cf9f4e6667c0af97d', 'Luciana', 'user'),
(23, 23, 'Tester', 'f5d1278e8109edd94e1e4197e04873b9', 'Tester', 'user'),
(24, 24, 'Mariana015 ', 'd3ffac9ffc72bcbeb4c87e4383379dbd', 'Mariana ', 'user');

-- 
-- Dumping data for table participacion
--
INSERT INTO participacion VALUES
(141, 19, 2, 1, 0, 1, 1, '2024-04-29', 'https://res.cloudinary.com/dh1zcffkd/image/upload/v1714417817/constancias/xwh3h2nudof9m8gaqylt.jpg', NULL, NULL, NULL, NULL, NULL),
(142, 19, 2, 1, 0, 1, 2, '2024-04-29', 'https://res.cloudinary.com/dh1zcffkd/image/upload/v1714417872/constancias/rvedglax91f1wg27styi.jpg', NULL, NULL, NULL, NULL, NULL),
(143, 19, 1, 40, 0, 2, 25, '2024-04-29', 'https://res.cloudinary.com/dh1zcffkd/image/upload/v1714421688/constancias/uqbbz9zvfowp1jqrhwre.jpg', NULL, NULL, NULL, NULL, NULL),
(144, 19, 1, 100, 0, 9, 100, '2024-04-29', 'https://res.cloudinary.com/dh1zcffkd/image/upload/v1714421735/constancias/atfmkoyke13vemlrp9l0.jpg', NULL, NULL, NULL, NULL, NULL),
(145, 20, 3, 25, 0, 55, 50, '2024-04-29', 'https://res.cloudinary.com/dh1zcffkd/image/upload/v1714422612/constancias/fxj7wxmdxrfgefujniag.jpg', NULL, NULL, NULL, NULL, NULL),
(146, 21, 1, 1, 0, 1, 1, '2024-04-29', 'https://res.cloudinary.com/dh1zcffkd/image/upload/v1714422806/constancias/sfpyoreibr0nybnkwovo.png,https://res.cloudinary.com/dh1zcffkd/image/upload/v1714422822/constancias/yadunu5p8ztjfyoiuaol.png', NULL, NULL, NULL, NULL, NULL),
(147, 21, 2, 1, 0, 1, 1, '2024-04-29', 'https://res.cloudinary.com/dh1zcffkd/image/upload/v1714422865/constancias/o9ngprbpxgaudwq2jdel.png,https://res.cloudinary.com/dh1zcffkd/image/upload/v1714422868/constancias/rdhdhdrttnmylvvi0gj1.png,https://res.cloudinary.com/dh1zcffkd/image/upload/v1714422870/constancias/ytcxc0afky6psuywavsb.png', NULL, NULL, NULL, NULL, NULL),
(148, 21, 3, 1, 0, 1, 1, '2024-04-29', 'https://res.cloudinary.com/dh1zcffkd/image/upload/v1714422897/constancias/gon1vjbhgtxhrrxh4ouq.png,https://res.cloudinary.com/dh1zcffkd/image/upload/v1714422899/constancias/ovde7gioohkbbihj2jwf.png,https://res.cloudinary.com/dh1zcffkd/image/upload/v1714422904/constancias/uxnn3aqsa3blcpvpqtuv.png', NULL, NULL, NULL, NULL, NULL),
(149, 19, 1, 14, 0, 2, 14, '2024-05-01', 'https://res.cloudinary.com/dh1zcffkd/image/upload/v1714523555/constancias/wpf5njjsaidtx7jdcorw.jpg', NULL, NULL, NULL, NULL, NULL);

-- Table heroku_33f44359de27941.logro does not contain any data (it is empty)

--
-- Restore previous SQL mode
--
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

--
-- Enable foreign keys
--
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;